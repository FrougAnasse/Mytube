(this.webpackJsonpprojet_perso=this.webpackJsonpprojet_perso||[]).push([[0],{20:function(e,t,s){},28:function(e,t,s){},41:function(e,t,s){},53:function(e,t,s){},54:function(e,t,s){},55:function(e,t,s){},56:function(e,t,s){"use strict";s.r(t);var c=s(1),a=s(2),n=s.n(a),r=s(32),i=s.n(r),o=s(14),d=s.n(o),u=s(19),l=s(12),j=s(21),b=s(22),h=s(24),v=s(23),f=(s(41),s(13)),m=(s(20),s(17)),O=(s(42),s(33)),x=s.n(O),p=(s(45),s(57),m.default.initializeApp({apiKey:"AIzaSyAsC4_WP_tfBFcGqXFUB4HSAZWn9RLXNVw",authDomain:"mytube-app-cbe9c.firebaseapp.com",databaseURL:"https://mytube-app-cbe9c.firebaseio.com",projectId:"mytube-app-cbe9c",storageBucket:"mytube-app-cbe9c.appspot.com",messagingSenderId:"522740483409",appId:"1:522740483409:web:bfc6200cb150d3d181ff70"})),y=x.a.createClass(p.database()),k=function(e){Object(h.a)(s,e);var t=Object(v.a)(s);function s(){var e;Object(j.a)(this,s);for(var c=arguments.length,a=new Array(c),n=0;n<c;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))).state={uid:null,name:null},e.handleAuth=function(){var t=Object(u.a)(d.a.mark((function t(s){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({uid:s.user.uid,name:s.user.displayName}),e.props.getUser(e.state.uid,e.state.name);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.authenticate=function(){var t=new m.default.auth.GoogleAuthProvider;p.auth().signInWithPopup(t).then(e.handleAuth)},e.logout=Object(u.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.default.auth().signOut();case 2:e.setState({uid:null}),e.props.disconnecte();case 4:case"end":return t.stop()}}),t)}))),e}return Object(b.a)(s,[{key:"render",value:function(){var e=this;return null===this.state.uid?Object(c.jsx)("div",{children:Object(c.jsx)("p",{onClick:this.authenticate,children:"Connexion"})}):Object(c.jsx)("div",{children:Object(c.jsx)("p",{onClick:function(){return e.logout()},children:this.props.getPseudo(this.state.uid)})})}}]),s}(a.Component),g=s(7),C=function(e){var t=e.state,s=e.stateMytube,n=e.handleSearch,r=e.handleUser,i=e.getUser,o=e.getPseudo,d=e.disconnecte,u=e.refCard,l=Object.keys(s||{}).map((function(e){return Object(c.jsx)("option",{value:s[e].nom},s[e].nom)})),j=Object(a.useState)(""),b=Object(f.a)(j,2),h=b[0],v=b[1],m=function(e){n(e)},O=Object(a.useRef)(null),x=Object(a.useRef)(null),p=Object(a.useRef)(null),y=Object(a.useRef)(null),C=Object(a.useRef)(null),N=Object(a.useRef)(null),L=Object(a.useRef)(null);return Object(a.useEffect)((function(){O.current.addEventListener("click",(function(){C.current.classList.toggle("active"),null!=u.current&&u.current.classList.add("move")})),N.current.addEventListener("click",(function(){C.current.classList.toggle("active"),null!=u.current&&u.current.classList.remove("move")})),L.current.addEventListener("click",(function(){C.current.classList.toggle("active"),null!=u.current&&u.current.classList.toggle("move")})),y.current.addEventListener("click",(function(){O.current.classList.toggle("active"),x.current.classList.toggle("active"),p.current.classList.toggle("active")}))}),[]),Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("header",{children:[Object(c.jsxs)("div",{className:"start",ref:O,children:[Object(c.jsx)("i",{className:"far fa-play-circle"}),Object(c.jsx)("h2",{children:"MyTube"})]}),Object(c.jsxs)("div",{className:"nav-info",ref:C,children:[Object(c.jsxs)("div",{className:"start cloneStart",ref:N,children:[Object(c.jsx)("i",{className:"far fa-play-circle"}),Object(c.jsx)("h2",{children:"MyTube"})]}),Object(c.jsx)("div",{className:"list",ref:L,children:Object(c.jsxs)("ul",{children:[Object(c.jsx)(g.b,{style:{textDecoration:"none",color:"#000"},to:"/",children:Object(c.jsx)("li",{children:"Accueil"})}),Object(c.jsx)(g.b,{style:{textDecoration:"none",color:"#000"},to:"/upload",children:Object(c.jsx)("li",{children:"Upload video"})}),Object(c.jsx)(g.b,{style:{textDecoration:"none",color:"#000"},to:"/video/likes",children:Object(c.jsx)("li",{className:"liens",children:"Video aim\xe9s"})})]})}),Object(c.jsx)("div",{className:"portfolio",children:Object(c.jsx)("span",{className:"liens",onClick:function(){return window.open("https://portfolio-froug-anasse.netlify.app")},children:"Vers portfolio"})})]}),Object(c.jsx)("div",{className:"center",ref:x,children:Object(c.jsxs)("form",{children:[Object(c.jsx)("input",{value:h,onChange:function(e){return v(e.target.value)},onClick:m,type:"text",list:"video",id:"search-video",name:"video",placeholder:"Recherche"}),Object(c.jsx)("datalist",{id:"video",children:l}),Object(c.jsx)(g.b,{style:{textDecoration:"none",color:"#000"},to:"/video/".concat(function(e){var t=null;return Object.keys(s||{}).forEach((function(c){e===s[c].nom&&(t=c)})),t}(h)),children:Object(c.jsx)("i",{className:"fas fa-search",ref:y,onClick:function(){m(h)}})})]})}),Object(c.jsx)("div",{className:"end",ref:p,children:Object(c.jsx)(k,{disconnecte:d,state:t,getPseudo:o,handleUser:r,getUser:i})})]})})};s(53);function N(e){var t=e.id,s=e.name,a=e.auteur,n=e.url,r=e.vue,i=e.like,o=e.addVue,d=e.isAlreadyLike,u=Object(c.jsx)("i",{className:"far fa-thumbs-up"});return d(t)&&(u=Object(c.jsx)("i",{className:"fas fa-thumbs-up"})),void 0===o?Object(c.jsxs)("div",{className:"cardMiniature",children:[Object(c.jsx)("div",{className:"div-video",children:Object(c.jsx)("video",{children:Object(c.jsx)("source",{src:n,type:"video/mp4"})})}),Object(c.jsxs)("div",{className:"div-text",children:[Object(c.jsx)("h3",{children:s}),Object(c.jsxs)("div",{className:"info",children:[Object(c.jsxs)("span",{children:["de ",a]}),Object(c.jsxs)("span",{children:["vues par ",r," personnes"]}),Object(c.jsxs)("span",{children:["avec ",i," likes"]}),u]})]})]}):Object(c.jsxs)("div",{className:"cardMiniature",children:[Object(c.jsx)("div",{className:"div-video",children:Object(c.jsx)("video",{onClick:function(){return o(t)},children:Object(c.jsx)("source",{src:n,type:"video/mp4"})})}),Object(c.jsxs)("div",{className:"div-text",children:[Object(c.jsx)("h3",{children:s}),Object(c.jsxs)("div",{className:"info",children:[Object(c.jsxs)("span",{children:["de ",a]}),Object(c.jsxs)("span",{children:["vues par ",r," personnes"]}),Object(c.jsxs)("span",{children:["avec ",i," likes"]}),u]})]})]})}s(28);var L=function(e){var t=e.stateMytube,s=e.handleVue,a=e.state,n=e.isAlreadyLike,r=e.refCard,i=function(e){s(e)},o=Object.keys(t||{}).map((function(e){var s="videoSelect/".concat(e);return function(e){if(""!==a.search&&null!==a.search)for(var t=0;t<a.search.length;t++)if(a.search[t]!==e[t]&&a.search[t]!==e[t].toUpperCase()&&a.search[t]!==e[t].toLowerCase())return!1;return!0}(t[e].nom)?Object(c.jsx)(g.b,{style:{textDecoration:"none",color:"#000"},to:s,children:Object(c.jsx)(N,{id:e,auteur:t[e].auteur,name:t[e].nom,url:t[e].url,tag:t[e].tag,vue:t[e].vue,like:t[e].like,isAlreadyLike:n,addVue:i},e)},s):""}));return Object(c.jsx)("div",{className:"cards",ref:r,children:o})},S=s(5);s(54);function A(e){var t=e.stateMytube,s=e.id,n=e.name,r=e.auteur,i=e.isAlreadyLike,o=e.url,d=e.vue,u=e.like,l=e.handleLike,j=e.addComment,b=Object(a.useState)(""),h=Object(f.a)(b,2),v=h[0],m=h[1],O=Object(c.jsx)("i",{onClick:function(){return l(s)},className:"far fa-thumbs-up"});i(s)&&(O=Object(c.jsx)("i",{onClick:function(){return l(s)},className:"fas fa-thumbs-up"}));var x=Object.keys(t[s].comment||{}).map((function(e){return Object(c.jsxs)("div",{className:"comment",children:[Object(c.jsxs)("h3",{children:[t[s].comment[e].auteur,":"]})," ",Object(c.jsx)("p",{children:t[s].comment[e].comment})," "]},e)})),p=Object(c.jsx)("label",{htmlFor:"msg",children:"Entrer votre commentaire"});return""!==v&&(p=Object(c.jsx)("label",{className:"move",htmlFor:"msg",children:"Entrer votre commentaire"})),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("div",{className:"cardVideo",children:[Object(c.jsx)("div",{className:"div-video",children:Object(c.jsx)("video",{controls:!0,children:Object(c.jsx)("source",{src:o,type:"video/mp4"})})}),Object(c.jsxs)("div",{className:"div-text",children:[Object(c.jsx)("h3",{children:n}),Object(c.jsxs)("div",{className:"info",children:[Object(c.jsxs)("span",{children:["de ",r]}),Object(c.jsxs)("span",{children:["vues par ",d," personnes"]}),Object(c.jsxs)("span",{children:["avec ",u," likes"]}),O]})]})]}),Object(c.jsxs)("form",{className:"form-content",children:[Object(c.jsx)("h2",{children:"Espace Commentaire"}),p,Object(c.jsx)("textarea",{id:"msg",name:"msg",value:v,onChange:function(e){return m(e.target.value)}}),Object(c.jsx)("button",{onClick:function(e){e.preventDefault(),j(s,v),m("")},children:"Envoyer votre commentaire"})]}),x]})}var V=function(e){var t=e.state,s=e.addComment,a=e.stateMytube,n=e.handleLike,r=e.isAlreadyLike,i=e.refCard,o=e.handleVue,d=Object(S.e)(),u=function(e){o(e)},l=Object.keys(a||{}).map((function(e){if(e==""+d.slug)return a[e].tag})),j="";l.forEach((function(e){void 0!=e&&(j=e)}));var b=Object.keys(a||{}).map((function(e){return e==""+d.slug?Object(c.jsx)(A,{id:e,state:t,stateMytube:a,auteur:a[e].auteur,name:a[e].nom,url:a[e].url,tag:a[e].tag,vue:a[e].vue,like:a[e].like,handleLike:n,isAlreadyLike:r,addComment:s},e):""})),h=Object.keys(a||{}).map((function(e){if(a[e].tag===j){var t="/videoSelect/".concat(e);return Object(c.jsx)(g.b,{style:{textDecoration:"none",color:"#000"},to:t,children:Object(c.jsx)(N,{id:e,auteur:a[e].auteur,name:a[e].nom,url:a[e].url,tag:a[e].tag,vue:a[e].vue,like:a[e].like,isAlreadyLike:r,addVue:u},e)},t)}}));return Object(c.jsxs)("div",{className:"flex-cards",children:[Object(c.jsx)("div",{className:"cardsVideo",ref:i,children:b}),Object(c.jsxs)("div",{className:"flexVideo",children:[Object(c.jsx)("div",{className:"text",children:Object(c.jsx)("h2",{children:"Recommandations"})}),Object(c.jsx)("div",{className:"videoReco",children:h})]})]})};s(55);function w(e){var t=e.state,s=(e.stateMytube,e.addVideo),n=e.refCard,r=Object(a.useState)(""),i=Object(f.a)(r,2),o=i[0],d=i[1],u=Object(a.useState)(""),l=Object(f.a)(u,2),j=l[0],b=l[1],h=Object(a.useState)(""),v=Object(f.a)(h,2),m=v[0],O=v[1];var x=function(e){e.preventDefault(),console.log({fichier:o});var t,c=(t=o,new File([t],j,{type:t.type,lastModified:t.lastModified})),a=p.storage().ref().child("video/"+c.name);a.put(c).then((function(){console.log("Upload a file"),a.getDownloadURL().then((function(e){console.log(e),s(j,m,e)}))})).catch((function(e){console.log(e)}))};return console.log(t.user.pseudo),void 0===t.user.pseudo||""===t.user.pseudo?Object(c.jsx)("div",{className:"cards-form",children:Object(c.jsx)("h2",{children:"Connectez-vous pour pouvoir poster des video !"})}):Object(c.jsxs)("div",{className:"cards-form",ref:n,children:[Object(c.jsx)("h2",{children:"Formulaire Upload video"}),Object(c.jsxs)("form",{children:[Object(c.jsxs)("div",{className:"element",children:[Object(c.jsx)("input",{id:"input-file",type:"file",onChange:function(e){return d(e.target.files[0])}}),Object(c.jsxs)("label",{htmlFor:"input-file",children:[Object(c.jsx)("i",{className:"fas fa-upload"}),"  Choisissez une video"]}),Object(c.jsxs)("span",{children:[Object(c.jsx)("strong",{children:"Vote fichier: "}),Object(c.jsx)("span",{id:"file-name",children:o.name})]})]}),Object(c.jsxs)("div",{className:"element",children:[Object(c.jsx)("label",{children:"Nom de la video"}),Object(c.jsx)("input",{type:"text",value:j,onChange:function(e){return b(e.target.value)}})]}),Object(c.jsxs)("div",{className:"element",children:[Object(c.jsx)("label",{children:"Le tags de la video"}),Object(c.jsx)("input",{type:"text",value:m,onChange:function(e){return O(e.target.value)}})]}),Object(c.jsx)("div",{className:"element",children:Object(c.jsx)("button",{onClick:function(e){return x(e)},children:"Envoyer votre video !"})})]})]})}var U=function(e){var t=e.state,s=e.stateMytube,a=e.refCard,n=e.isAlreadyLike;e.typeJaime;return void 0===t.user.pseudo||""===t.user.pseudo?Object(c.jsx)("div",{className:"cards-form",children:Object(c.jsx)("h2",{children:"Connectez-vous pour pouvoir voir vos video j'aime !"})}):Object(c.jsx)("div",{className:"cards",ref:a,children:Object.keys(s||{}).map((function(e){if(void 0!==s[e].likeBy&&void 0!==s[e].likeBy[t.user.uid]&&1===s[e].likeBy[t.user.uid]){var a="/videoSelect/".concat(e);return Object(c.jsx)(g.b,{style:{textDecoration:"none",color:"#000"},to:a,children:Object(c.jsx)(N,{id:e,state:t,auteur:s[e].auteur,name:s[e].nom,url:s[e].url,tag:s[e].tag,vue:s[e].vue,like:s[e].like,isAlreadyLike:n},e)},a)}return 0}))})},M=function(e){Object(h.a)(s,e);var t=Object(v.a)(s);function s(e){var c;return Object(j.a)(this,s),(c=t.call(this,e)).handleSearch=function(e){c.setState({search:e})},c.disconnecte=function(){c.setState({user:""})},c.handleUser=function(e){c.setState({user:e})},c.handleVue=function(e){var t=Object(l.a)({},c.state.mytube);t.video[e].vue++,c.setState({mytube:t});var s=e;c.setState({videoSelected:s})},c.isAlreadyLike=function(e){var t=Object(l.a)({},c.state.mytube),s=!1;if(void 0!==t)return Object.keys(t.video[e].likeBy||{}).forEach((function(a){a===c.state.user.uid&&1===t.video[e].likeBy[c.state.user.uid]&&(s=!0)})),s},c.handleLike=function(e){if(void 0!==c.state.user.uid){var t=Object(l.a)({},c.state.mytube);void 0===t.video[e].likeBy&&(t.video[e].likeBy={}),void 0===t.video[e].likeBy[c.state.user.uid]||0===t.video[e].likeBy[c.state.user.uid]?(t.video[e].like++,t.video[e].likeBy[c.state.user.uid]=1):(t.video[e].like--,t.video[e].likeBy[c.state.user.uid]=0),c.setState({mytube:t})}},c.getPseudo=function(e){var t=Object(l.a)({},c.state.mytube.user),s="";return Object.keys(t||{}).forEach((function(c){t[c].uid===e&&(s=t[c].pseudo)})),s},c.addNewUser=function(){var e=Object(u.a)(d.a.mark((function e(t,s){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(l.a)({},c.state.mytube),n={uid:t,pseudo:s},console.log(n.pseudo),a.user["user-".concat(Date.now())]=n,c.setState({mytube:a}),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}(),c.getUser=function(e,t){var s=Object(l.a)({},c.state.mytube.user),a={};Object.keys(s).forEach((function(t){s[t].uid===e&&(a=s[t])})),void 0===a.uid&&(a=c.addNewUser(e,t)),c.setState({user:a})},c.addVideo=function(e,t,s){var a=Object(l.a)({},c.state.mytube),n={auteur:c.state.user.pseudo,comment:{},like:0,likeBy:{},nom:e,tag:t,url:s,vue:0};a.video["video".concat(Date.now())]=n,c.setState({mytube:a})},c.addComment=function(e,t){if(void 0!==c.state.user.uid){var s=Object(l.a)({},c.state.mytube);void 0!==s.video[e].comment&&""!==s.video[e].comment||(s.video[e].comment={});var a={auteur:c.state.user.pseudo,comment:t};s.video[e].comment[Date.now()]=a,c.setState({mytube:s})}},c.refCard=n.a.createRef(),c.refCardVideo=n.a.createRef(),c.state={mytube:{},search:"",videoSelected:"",user:{}},c}return Object(b.a)(s,[{key:"componentDidMount",value:function(){this.ref=y.syncState("/",{context:this,state:"mytube"})}},{key:"componentWillUnmount",value:function(){y.removeBinding(this.ref)}},{key:"render",value:function(){var e=this;return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)(g.a,{children:[Object(c.jsx)(C,{state:this.state,getPseudo:this.getPseudo,stateMytube:this.state.mytube.video,handleSearch:this.handleSearch,handleUser:this.handleUser,getUser:this.getUser,disconnecte:this.disconnecte,refCardVideo:this.refCardVideo,refCard:this.refCard}),Object(c.jsx)(S.a,{path:"/",exact:!0,render:function(){return Object(c.jsx)(L,{state:e.state,stateMytube:e.state.mytube.video,handleVue:e.handleVue,isAlreadyLike:e.isAlreadyLike,refCard:e.refCard})}}),Object(c.jsx)(S.a,{path:"/videoSelect/:slug",exact:!0,render:function(){return Object(c.jsx)(V,{state:e.state,isAlreadyLike:e.isAlreadyLike,stateMytube:e.state.mytube.video,handleLike:e.handleLike,refCardVideo:e.refCardVideo,refCard:e.refCard,addComment:e.addComment,handleVue:e.handleVue})}}),Object(c.jsx)(S.a,{path:"/upload",exact:!0,render:function(){return Object(c.jsx)(w,{state:e.state,stateMytube:e.state.mytube.video,addVideo:e.addVideo,refCard:e.refCard,isAlreadyLike:e.isAlreadyLike})}}),Object(c.jsx)(S.a,{path:"/video/likes",exact:!0,render:function(){return Object(c.jsx)(U,{state:e.state,stateMytube:e.state.mytube.video,refCard:e.refCard,isAlreadyLike:e.isAlreadyLike,typeJaime:!0})}})]})})}}]),s}(n.a.Component);i.a.render(Object(c.jsx)(n.a.StrictMode,{children:Object(c.jsx)(M,{})}),document.getElementById("root"))}},[[56,1,2]]]);
//# sourceMappingURL=main.f35a2e95.chunk.js.map