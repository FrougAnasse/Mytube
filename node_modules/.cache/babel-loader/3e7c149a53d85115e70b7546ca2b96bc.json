{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/VolgoBox/Desktop/Mytube/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/VolgoBox/Desktop/Mytube/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/Users/VolgoBox/Desktop/Mytube/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/VolgoBox/Desktop/Mytube/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/VolgoBox/Desktop/Mytube/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/VolgoBox/Desktop/Mytube/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{Component}from'react';import firebase from'firebase/app';import'firebase/auth';import{firebaseInitApp}from'../base';var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={uid:null};_this.handleAuth=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(authData){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setState({uid:authData.user.uid});_this.props.getUser(_this.state.uid);case 2:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.authenticate=function(){var authProvider=new firebase.auth.GoogleAuthProvider();firebaseInitApp.auth().signInWithPopup(authProvider).then(_this.handleAuth);};_this.logout=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return firebase.auth().signOut();case 2:_this.setState({uid:null});_this.props.disconnecte();case 4:case\"end\":return _context2.stop();}}},_callee2);}));return _this;}_createClass(Login,[{key:\"render\",value:function render(){var _this2=this;if(this.state.uid===null){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{onClick:this.authenticate,children:\"Connexion\"})});}else{return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{onClick:function onClick(){return _this2.logout();},children:this.props.getPseudo(this.state.uid)})});}}}]);return Login;}(Component);export{Login as default};","map":{"version":3,"sources":["C:/Users/VolgoBox/Desktop/Mytube/src/component/Login.js"],"names":["React","Component","firebase","firebaseInitApp","Login","state","uid","handleAuth","authData","setState","user","props","getUser","authenticate","authProvider","auth","GoogleAuthProvider","signInWithPopup","then","logout","signOut","disconnecte","getPseudo"],"mappings":"k6BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CAEA,MAAOC,CAAAA,QAAP,KAAqB,cAArB,CACA,MAAO,eAAP,CACA,OAASC,eAAT,KAA+B,SAA/B,C,GAGqBC,CAAAA,K,uTAEjBC,K,CAAM,CACFC,GAAG,CAAC,IADF,C,OAMNC,U,0FAAa,iBAAMC,QAAN,kHAGT,MAAKC,QAAL,CAAc,CACVH,GAAG,CAAEE,QAAQ,CAACE,IAAT,CAAcJ,GADT,CAAd,EAGF,MAAKK,KAAL,CAAWC,OAAX,CAAmB,MAAKP,KAAL,CAAWC,GAA9B,EANW,sD,qEAUbO,Y,CAAa,UAAI,CACb,GAAMC,CAAAA,YAAY,CAAC,GAAIZ,CAAAA,QAAQ,CAACa,IAAT,CAAcC,kBAAlB,EAAnB,CACAb,eAAe,CACVY,IADL,GAEKE,eAFL,CAEqBH,YAFrB,EAGKI,IAHL,CAGU,MAAKX,UAHf,EAIH,C,OAEDY,M,sEAAS,+JACCjB,CAAAA,QAAQ,CAACa,IAAT,GAAgBK,OAAhB,EADD,QAEL,MAAKX,QAAL,CAAc,CACVH,GAAG,CAAC,IADM,CAAd,EAGA,MAAKK,KAAL,CAAWU,WAAX,GALK,wD,0EAQA,iBACJ,GAAG,KAAKhB,KAAL,CAAWC,GAAX,GAAiB,IAApB,CAAyB,CACtB,mBACI,kCACI,UAAG,OAAO,CAAE,KAAKO,YAAjB,uBADJ,EADJ,CAKH,CANA,IAOG,CAEA,mBACI,kCACI,UACA,OAAO,CAAE,yBAAI,CAAA,MAAI,CAACM,MAAL,EAAJ,EADT,UAGE,KAAKR,KAAL,CAAWW,SAAX,CAAqB,KAAKjB,KAAL,CAAWC,GAAhC,CAHF,EADJ,EADJ,CASH,CACJ,C,mBAtD8BL,S,SAAdG,K","sourcesContent":["import React, { Component } from 'react'\r\n\r\nimport firebase from 'firebase/app'\r\nimport 'firebase/auth'\r\nimport { firebaseInitApp} from '../base'\r\n\r\n\r\nexport default class Login extends Component {\r\n    \r\n    state={\r\n        uid:null\r\n    }\r\n    \r\n\r\n\r\n    handleAuth = async authData=>{\r\n        \r\n\r\n        this.setState({\r\n            uid: authData.user.uid\r\n        })\r\n      this.props.getUser(this.state.uid)\r\n    }\r\n\r\n\r\n    authenticate=()=>{\r\n        const authProvider=new firebase.auth.GoogleAuthProvider()\r\n        firebaseInitApp\r\n            .auth()\r\n            .signInWithPopup(authProvider)\r\n            .then(this.handleAuth)\r\n    }\r\n\r\n    logout = async ()=>{\r\n        await firebase.auth().signOut()\r\n        this.setState({\r\n            uid:null         \r\n        })\r\n        this.props.disconnecte();\r\n    }\r\n\r\n    render() {\r\n         if(this.state.uid===null){\r\n            return (\r\n                <div>\r\n                    <p onClick={this.authenticate}>Connexion</p>\r\n                </div>\r\n            )\r\n        }\r\n        else{\r\n           \r\n            return (\r\n                <div>\r\n                    <p \r\n                    onClick={()=>this.logout()}\r\n                    >\r\n                     {this.props.getPseudo(this.state.uid)}\r\n                     </p>\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}