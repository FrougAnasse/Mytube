{"ast":null,"code":"import _slicedToArray from\"C:/Users/VolgoBox/Desktop/Mytube/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useState}from'react';import{firebaseInitApp}from'../base';import'./AdminUpload.css';export default function AdminUpload(_ref){var state=_ref.state,stateMytube=_ref.stateMytube,addVideo=_ref.addVideo,refCard=_ref.refCard;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),fichier=_useState2[0],changeFichier=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),name=_useState4[0],changeName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),tags=_useState6[0],changeTags=_useState6[1];function renameFile(originalFile,newName){return new File([originalFile],newName,{type:originalFile.type,lastModified:originalFile.lastModified});}var onChange=function onChange(event){event.preventDefault();console.log({fichier:fichier});var file=renameFile(fichier,name);var storageRef=firebaseInitApp.storage().ref();var fileRef=storageRef.child('video/'+file.name);fileRef.put(file).then(function(){console.log(\"Upload a file\");fileRef.getDownloadURL().then(function(url){console.log(url);addVideo(name,tags,url);});}).catch(function(error){console.log(error);});};console.log(state.user.pseudo);if(state.user.pseudo===undefined||state.user.pseudo===''){return/*#__PURE__*/_jsx(\"div\",{className:\"cards-form\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Connectez-vous pour pouvoir poster des video !\"})});}else{return/*#__PURE__*/_jsxs(\"div\",{className:\"cards-form\",ref:refCard,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Formulaire Upload video\"}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"element\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"input-file\",type:\"file\",onChange:function onChange(e){return changeFichier(e.target.files[0]);}}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"input-file\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-upload\"}),\"  Choisissez une video\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Vote fichier: \"}),/*#__PURE__*/_jsx(\"span\",{id:\"file-name\",children:fichier.name})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"element\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Nom de la video\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:name,onChange:function onChange(e){return changeName(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"element\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Le tags de la video\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:tags,onChange:function onChange(e){return changeTags(e.target.value);}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"element\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){return onChange(e);},children:\"Envoyer votre video !\"})})]})]});}}","map":{"version":3,"sources":["C:/Users/VolgoBox/Desktop/Mytube/src/component/AdminUpload.js"],"names":["React","useState","firebaseInitApp","AdminUpload","state","stateMytube","addVideo","refCard","fichier","changeFichier","name","changeName","tags","changeTags","renameFile","originalFile","newName","File","type","lastModified","onChange","event","preventDefault","console","log","file","storageRef","storage","ref","fileRef","child","put","then","getDownloadURL","url","catch","error","user","pseudo","undefined","e","target","files","value"],"mappings":"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","sourcesContent":["import React,{useState} from 'react'\r\n\r\nimport {firebaseInitApp} from '../base'\r\n\r\nimport './AdminUpload.css'\r\n\r\nexport default function AdminUpload({state,stateMytube,addVideo,refCard}) {\r\n\r\n    const [fichier,changeFichier]=useState('')\r\n    const [name,changeName]=useState('')\r\n    const [tags,changeTags]=useState('')\r\n    \r\n    \r\n    function renameFile(originalFile, newName) {\r\n        return new File([originalFile], newName, {\r\n            type: originalFile.type,\r\n            lastModified: originalFile.lastModified,\r\n        });\r\n    }\r\n\r\n     const onChange=(event)=>{\r\n        event.preventDefault()\r\n        console.log({fichier})\r\n        const file= renameFile(fichier, name)\r\n        const storageRef=firebaseInitApp.storage().ref()\r\n        const  fileRef=storageRef.child('video/'+file.name)\r\n        fileRef.put(file).then(()=>{\r\n            console.log(\"Upload a file\");\r\n             fileRef.getDownloadURL().then(function (url) {\r\n                 console.log(url)\r\n\r\n                 addVideo(name,tags,url)\r\n             });\r\n        }).catch((error)=>{\r\n            console.log(error)\r\n        })\r\n\r\n    }\r\n    console.log(state.user.pseudo)\r\n    if(state.user.pseudo===undefined || state.user.pseudo===''){\r\n        return <div className='cards-form'>\r\n                    <h2>Connectez-vous pour pouvoir poster des video !</h2>\r\n                 </div>\r\n    }else{\r\n        return (\r\n            <div className=\"cards-form\" ref={refCard}>\r\n                <h2>Formulaire Upload video</h2>\r\n                <form> \r\n                    <div className=\"element\">\r\n                       \r\n                        <input id=\"input-file\" type=\"file\" \r\n                              onChange={(e)=>changeFichier(e.target.files[0])}/>\r\n                        <label htmlFor=\"input-file\"><i className=\"fas fa-upload\"></i>  Choisissez une video</label>\r\n                        <span>\r\n                            <strong>Vote fichier: </strong>\r\n                            <span id=\"file-name\">{fichier.name}</span>\r\n                        </span>\r\n                    </div>\r\n    \r\n                    <div className=\"element\">\r\n                        <label>Nom de la video</label>\r\n                        <input type=\"text\" value={name} onChange={(e)=>changeName(e.target.value) } />\r\n\r\n                    </div>\r\n    \r\n                    <div className=\"element\">\r\n                        <label>Le tags de la video</label>\r\n                        <input type=\"text\"  value={tags} onChange={(e)=>changeTags(e.target.value) }/>\r\n                    </div>\r\n    \r\n                    <div className=\"element\">\r\n                        <button onClick={(e)=>onChange(e)}>Envoyer votre video !</button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n \r\n}\r\n"]},"metadata":{},"sourceType":"module"}