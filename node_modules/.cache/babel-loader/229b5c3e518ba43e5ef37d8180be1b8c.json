{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\VolgoBox\\\\Desktop\\\\Mytube\\\\src\\\\App.js\";\nimport React from 'react';\nimport './App.css';\nimport Nav from './component/Nav';\nimport AdminVideo from './component/AdminVideo';\nimport AdminVideoSelected from './component/AdminVideoSelected';\nimport AdminUpload from './component/AdminUpload';\nimport AdminVideoJaime from './component/AdminVideoJaime'; //firebase\n\nimport base from './base'; //react router\n\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSearch = value => {\n      this.setState({\n        search: value\n      });\n    };\n\n    this.disconnecte = () => {\n      this.setState({\n        user: ''\n      });\n    };\n\n    this.handleUser = value => {\n      this.setState({\n        user: value\n      });\n    };\n\n    this.handleVue = key => {\n      const mytube = { ...this.state.mytube\n      };\n      mytube.video[key].vue++;\n      this.setState({\n        mytube\n      });\n      const videoSelected = key;\n      this.setState({\n        videoSelected\n      });\n    };\n\n    this.isAlreadyLike = keyVideo => {\n      const mytube = { ...this.state.mytube\n      };\n      let Already = false;\n\n      if (mytube !== undefined) {\n        Object.keys(mytube.video[keyVideo].likeBy || {}).forEach(key => {\n          if (key === this.state.user.uid) {\n            if (mytube.video[keyVideo].likeBy[this.state.user.uid] === 1) {\n              Already = true;\n            }\n          }\n        });\n        return Already;\n      }\n    };\n\n    this.handleLike = key => {\n      if (this.state.user.uid !== undefined) {\n        const mytube = { ...this.state.mytube\n        };\n\n        if (mytube.video[key].likeBy === undefined) {\n          mytube.video[key].likeBy = {};\n        }\n\n        if (mytube.video[key].likeBy[this.state.user.uid] === undefined || mytube.video[key].likeBy[this.state.user.uid] === 0) {\n          mytube.video[key].like++;\n          mytube.video[key].likeBy[this.state.user.uid] = 1;\n        } else {\n          mytube.video[key].like--;\n          mytube.video[key].likeBy[this.state.user.uid] = 0;\n        }\n\n        this.setState({\n          mytube\n        });\n      }\n    };\n\n    this.getPseudo = uid => {\n      const Testuser = { ...this.state.mytube.user\n      };\n      let pseudo = '';\n      Object.keys(Testuser || {}) //on vérifie que le compte n'a pas déja été créer\n      .forEach(key => {\n        if (Testuser[key].uid === uid) {\n          pseudo = Testuser[key].pseudo;\n        }\n      });\n      return pseudo;\n    };\n\n    this.addNewUser = async uid => {\n      const mytube = { ...this.state.mytube\n      };\n      let pseudoUid = this.getPseudo(uid);\n      const newUser = {\n        uid: uid,\n        pseudo: pseudoUid\n      };\n\n      if (newUser.pseudo === '' || newUser.pseudo === undefined) {\n        newUser.pseudo = prompt(\"Veuillez rentrer votre pseudo attention il est définitif !\");\n      }\n\n      mytube.user[`user-${Date.now()}`] = newUser;\n      this.setState({\n        mytube\n      });\n      return newUser;\n    };\n\n    this.getUser = uid => {\n      const Testuser = { ...this.state.mytube.user\n      };\n      let newUser = {};\n      Object.keys(Testuser) //on vérifie que le compte n'a pas déja été créer\n      .forEach(key => {\n        if (Testuser[key].uid === uid) {\n          newUser = Testuser[key];\n        }\n      });\n\n      if (newUser.uid === undefined) {\n        //si aucun compte n'a été ctrouver on en créer un\n        newUser = this.addNewUser(uid);\n      }\n\n      this.setState({\n        user: newUser\n      });\n    };\n\n    this.addVideo = (nom, tags, url) => {\n      const mytube = { ...this.state.mytube\n      };\n      const NewVideo = {\n        auteur: this.state.user.pseudo,\n        comment: {},\n        like: 0,\n        likeBy: {},\n        nom: nom,\n        tag: tags,\n        url: url,\n        vue: 0\n      };\n      mytube.video[`video${Date.now()}`] = NewVideo;\n      this.setState({\n        mytube\n      });\n    };\n\n    this.addComment = (key, comment) => {\n      if (this.state.user.uid !== undefined) {\n        const mytube = { ...this.state.mytube\n        };\n\n        if (mytube.video[key].comment === undefined || mytube.video[key].comment === '') {\n          mytube.video[key].comment = {};\n        }\n\n        const NewComment = {\n          auteur: this.state.user.pseudo,\n          comment: comment\n        };\n        mytube.video[key].comment[Date.now()] = NewComment;\n        this.setState({\n          mytube\n        });\n      }\n    };\n\n    this.refCard = /*#__PURE__*/React.createRef();\n    this.refCardVideo = /*#__PURE__*/React.createRef();\n    this.state = {\n      mytube: {},\n      search: '',\n      videoSelected: '',\n      user: {}\n    };\n  }\n\n  componentDidMount() {\n    this.ref = base.syncState(`/`, {\n      context: this,\n      state: 'mytube'\n    });\n  }\n\n  componentWillUnmount() {\n    base.removeBinding(this.ref);\n  }\n\n  render() {\n    //variable permettant la manipulation de la marge lors de l'activation du menu\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(Router, {\n        children: [/*#__PURE__*/_jsxDEV(Nav, {\n          state: this.state,\n          getPseudo: this.getPseudo,\n          stateMytube: this.state.mytube.video,\n          handleSearch: this.handleSearch,\n          handleUser: this.handleUser,\n          getUser: this.getUser,\n          disconnecte: this.disconnecte,\n          refCardVideo: this.refCardVideo,\n          refCard: this.refCard\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/\",\n          exact: true,\n          render: () => /*#__PURE__*/_jsxDEV(AdminVideo, {\n            state: this.state,\n            stateMytube: this.state.mytube.video,\n            handleVue: this.handleVue,\n            isAlreadyLike: this.isAlreadyLike,\n            refCard: this.refCard\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 10\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/videoSelect/:slug\",\n          exact: true,\n          render: () => /*#__PURE__*/_jsxDEV(AdminVideoSelected, {\n            state: this.state,\n            isAlreadyLike: this.isAlreadyLike,\n            stateMytube: this.state.mytube.video,\n            handleLike: this.handleLike,\n            refCardVideo: this.refCardVideo,\n            refCard: this.refCard,\n            addComment: this.addComment,\n            handleVue: this.handleVue\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 10\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/upload\",\n          exact: true,\n          render: () => /*#__PURE__*/_jsxDEV(AdminUpload, {\n            state: this.state,\n            stateMytube: this.state.mytube.video,\n            addVideo: this.addVideo,\n            refCard: this.refCard,\n            isAlreadyLike: this.isAlreadyLike\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/video/likes\",\n          exact: true,\n          render: () => /*#__PURE__*/_jsxDEV(AdminVideoJaime, {\n            state: this.state,\n            stateMytube: this.state.mytube.video,\n            refCard: this.refCard,\n            isAlreadyLike: this.isAlreadyLike,\n            typeJaime: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 8\n      }, this)\n    }, void 0, false);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Users/VolgoBox/Desktop/Mytube/src/App.js"],"names":["React","Nav","AdminVideo","AdminVideoSelected","AdminUpload","AdminVideoJaime","base","BrowserRouter","Router","Route","App","Component","constructor","props","handleSearch","value","setState","search","disconnecte","user","handleUser","handleVue","key","mytube","state","video","vue","videoSelected","isAlreadyLike","keyVideo","Already","undefined","Object","keys","likeBy","forEach","uid","handleLike","like","getPseudo","Testuser","pseudo","addNewUser","pseudoUid","newUser","prompt","Date","now","getUser","addVideo","nom","tags","url","NewVideo","auteur","comment","tag","addComment","NewComment","refCard","createRef","refCardVideo","componentDidMount","ref","syncState","context","componentWillUnmount","removeBinding","render"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport './App.css';\r\nimport Nav from './component/Nav'\r\nimport AdminVideo from './component/AdminVideo'\r\nimport AdminVideoSelected from './component/AdminVideoSelected'\r\nimport AdminUpload from './component/AdminUpload'\r\nimport AdminVideoJaime from './component/AdminVideoJaime'\r\n\r\n//firebase\r\nimport base from './base'\r\n\r\n//react router\r\nimport{BrowserRouter as Router,Route} from 'react-router-dom'\r\n\r\nclass App extends React.Component{\r\n  constructor(props) {\r\n    super(props);\r\n    this.refCard = React.createRef();\r\n    this.refCardVideo = React.createRef();\r\n    \r\n    this.state ={\r\n      mytube:{},\r\n      search:'',\r\n      videoSelected:'',\r\n      user:{}\r\n    }\r\n  }\r\n   \r\n\r\n  componentDidMount(){\r\n    this.ref=base.syncState(`/`,{\r\n      context:this,\r\n      state: 'mytube'\r\n    })\r\n  }\r\n\r\n  componentWillUnmount(){\r\n    base.removeBinding(this.ref);\r\n  }\r\n\r\n  handleSearch=(value)=>{\r\n    this.setState({search:value})\r\n    \r\n  }\r\n\r\n  disconnecte=()=>{\r\n    this.setState({user:''})\r\n  }\r\n\r\n  handleUser=(value)=>{\r\n    this.setState({user:value})\r\n  }\r\n  \r\n  handleVue=(key) => {\r\n    const mytube= {...this.state.mytube}\r\n    mytube.video[key].vue++;\r\n    this.setState({mytube})\r\n  \r\n    const videoSelected=key\r\n    this.setState({videoSelected})\r\n  }\r\n\r\n\r\n  isAlreadyLike=(keyVideo)=>{\r\n    const mytube= {...this.state.mytube}\r\n    let Already=false;\r\n    if(mytube!==undefined){\r\n      Object.keys(mytube.video[keyVideo].likeBy || {})\r\n            .forEach(key =>{\r\n                if(key===this.state.user.uid)\r\n                {\r\n                  if(mytube.video[keyVideo].likeBy[this.state.user.uid]===1){\r\n                     Already=true\r\n                  }\r\n                }\r\n            })\r\n\r\n      return  Already\r\n    }\r\n  }\r\n\r\n  handleLike = (key) => {\r\n  \r\n    if(this.state.user.uid!==undefined ){\r\n      const mytube= {...this.state.mytube}\r\n  \r\n   \r\n    if( mytube.video[key].likeBy===undefined){\r\n          mytube.video[key].likeBy={};\r\n    }\r\n     if(mytube.video[key].likeBy[this.state.user.uid]===undefined || mytube.video[key].likeBy[this.state.user.uid]===0){\r\n        mytube.video[key].like++\r\n        mytube.video[key].likeBy[this.state.user.uid]=1\r\n      }\r\n      else\r\n      {\r\n        mytube.video[key].like--\r\n        mytube.video[key].likeBy[this.state.user.uid]=0\r\n      }\r\n      this.setState({mytube})\r\n    }\r\n  }\r\n\r\n\r\n  getPseudo=(uid)=>{\r\n\r\n    const Testuser={...this.state.mytube.user}\r\n    let pseudo=''\r\n    Object.keys(Testuser || {})   //on vérifie que le compte n'a pas déja été créer\r\n        .forEach(key => {\r\n                      if((Testuser[key].uid===uid)){\r\n                        pseudo=Testuser[key].pseudo\r\n                      }\r\n                   }\r\n            );\r\n    return pseudo\r\n  }\r\n\r\n  addNewUser= async (uid)=>{\r\n    const mytube={...this.state.mytube}\r\n    let pseudoUid=this.getPseudo(uid)\r\n\r\n    const newUser={\r\n      uid:uid,\r\n      pseudo:pseudoUid\r\n    }\r\n    \r\n    if(newUser.pseudo==='' ||newUser.pseudo===undefined ){\r\n      newUser.pseudo= \r\n      prompt(\"Veuillez rentrer votre pseudo attention il est définitif !\")\r\n  }\r\n\r\n\r\n    mytube.user[`user-${Date.now()}`]=newUser\r\n    this.setState({mytube})\r\n    return newUser;\r\n  }\r\n\r\n  getUser=(uid)=>{\r\n\r\n    const Testuser={...this.state.mytube.user}\r\n    let newUser={}\r\n    Object.keys(Testuser)   //on vérifie que le compte n'a pas déja été créer\r\n        .forEach(key => {\r\n                  if((Testuser[key].uid===uid)){\r\n                    newUser=Testuser[key];\r\n                  }\r\n             }\r\n        );\r\n    if(newUser.uid===undefined){    //si aucun compte n'a été ctrouver on en créer un\r\n \r\n      newUser=this.addNewUser(uid)\r\n    }\r\n\r\n    \r\n    this.setState({user:newUser})\r\n  }\r\n\r\n\r\n  addVideo=(nom,tags,url)=>{\r\n    const mytube={...this.state.mytube}\r\n    const NewVideo={\r\n      auteur:this.state.user.pseudo,\r\n      comment:{},\r\n      like:0,\r\n      likeBy:{},\r\n      nom:nom,\r\n      tag:tags,\r\n      url:url,\r\n      vue:0\r\n    }\r\n    mytube.video[`video${Date.now()}`]=NewVideo\r\n    this.setState({mytube})\r\n\r\n  }\r\n\r\n  addComment=(key,comment)=>{\r\n    if(this.state.user.uid!==undefined ){\r\n      const mytube= {...this.state.mytube}\r\n      if( mytube.video[key].comment===undefined ||mytube.video[key].comment===''){\r\n          mytube.video[key].comment={};\r\n      }\r\n\r\n      const NewComment={\r\n       auteur:this.state.user.pseudo,\r\n       comment:comment\r\n     }\r\n      mytube.video[key].comment[Date.now()]=NewComment\r\n      this.setState({mytube})\r\n    }\r\n  }\r\n\r\n  render(){\r\n    \r\n  //variable permettant la manipulation de la marge lors de l'activation du menu\r\n\r\n\r\n\r\n    return (\r\n      <>\r\n       <Router>\r\n         \r\n          <Nav state={this.state}  getPseudo={this.getPseudo} \r\n                  stateMytube={this.state.mytube.video} \r\n                  handleSearch={this.handleSearch} \r\n                  handleUser={this.handleUser} \r\n                  getUser={this.getUser} \r\n                  disconnecte={this.disconnecte}\r\n                  refCardVideo={this.refCardVideo}\r\n                  refCard={this.refCard}\r\n                  >\r\n          </Nav>\r\n        \r\n         <Route path='/' exact \r\n                render={()=><AdminVideo\r\n                            state={this.state} \r\n                            stateMytube={this.state.mytube.video} \r\n                            handleVue={this.handleVue}\r\n                            isAlreadyLike={this.isAlreadyLike}\r\n                            refCard={this.refCard}\r\n                          />\r\n                        }/>\r\n        \r\n         <Route path='/videoSelect/:slug' exact \r\n                render={()=><AdminVideoSelected \r\n                        state={this.state}\r\n                        isAlreadyLike={this.isAlreadyLike}\r\n                        stateMytube={this.state.mytube.video} \r\n                        handleLike={this.handleLike}\r\n                        refCardVideo={this.refCardVideo}\r\n                        refCard={this.refCard}\r\n                        addComment={this.addComment}\r\n                        handleVue={this.handleVue}\r\n                        />\r\n                        }/> \r\n\r\n          <Route path='/upload' exact \r\n                render={()=><AdminUpload state={this.state} \r\n                              stateMytube={this.state.mytube.video} \r\n                              addVideo={this.addVideo}\r\n                              refCard={this.refCard}\r\n                              isAlreadyLike={this.isAlreadyLike}/> \r\n                        }/>\r\n          \r\n          <Route path='/video/likes' exact \r\n                render={()=><AdminVideoJaime \r\n                              state={this.state} \r\n                              stateMytube={this.state.mytube.video} \r\n                              refCard={this.refCard}\r\n                              isAlreadyLike={this.isAlreadyLike}\r\n                              typeJaime={true}/> \r\n                        }/>\r\n          \r\n          \r\n\r\n      </Router> \r\n      </>\r\n    );\r\n  }\r\n}\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}