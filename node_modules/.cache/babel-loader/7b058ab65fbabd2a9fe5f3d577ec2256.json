{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\VolgoBox\\\\Desktop\\\\mes formation\\\\Mytube\\\\mytube\\\\Mytube\\\\src\\\\component\\\\Login.js\";\nimport React, { Component } from 'react';\nimport firebase from 'firebase/app';\nimport 'firebase/auth';\nimport base, { firebaseApp } from '../base';\nexport default class Login extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      uid: null,\n      pseudo: null\n    };\n\n    this.handleAuth = async authData => {\n      console.log(authData.user.uid);\n      this.setState({\n        uid: authData.user.uid\n      });\n      let pseudoUid = await this.props.getPseudo(this.state.uid);\n\n      if (pseudoUid == '' || pseudoUid == null) {\n        pseudoUid = prompt(\"Veuillez rentrer votre pseudo attention\");\n      }\n\n      this.setState({\n        pseudo: pseudoUid\n      });\n      await this.props.getUser(this.state.pseudo, this.state.uid);\n    };\n\n    this.authenticate = () => {\n      const authProvider = new firebase.auth.GoogleAuthProvider();\n      firebaseApp.auth().signInWithPopup(authProvider).then(this.handleAuth);\n    };\n\n    this.logout = async () => {\n      console.log('déconexion');\n      await firebase.auth().signOut();\n      this.setState({\n        uid: null\n      });\n    };\n  }\n\n  componentDidMount() {\n    firebase.auth().onAuthStateChanged(user => {\n      if (user) {\n        this.handleAuth({\n          user\n        });\n        this.props.handleUser(this.state.uid);\n      }\n    });\n  }\n\n  render() {\n    if (this.state.uid === null) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          onClick: this.authenticate,\n          children: \"Connexion\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          onClick: this.logout,\n          children: \"D\\xE9connexion\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this);\n    }\n  }\n\n}","map":{"version":3,"sources":["C:/Users/VolgoBox/Desktop/mes formation/Mytube/mytube/Mytube/src/component/Login.js"],"names":["React","Component","firebase","base","firebaseApp","Login","state","uid","pseudo","handleAuth","authData","console","log","user","setState","pseudoUid","props","getPseudo","prompt","getUser","authenticate","authProvider","auth","GoogleAuthProvider","signInWithPopup","then","logout","signOut","componentDidMount","onAuthStateChanged","handleUser","render"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AAEA,OAAOC,QAAP,MAAqB,cAArB;AACA,OAAO,eAAP;AACA,OAAOC,IAAP,IAAcC,WAAd,QAAgC,SAAhC;AAGA,eAAe,MAAMC,KAAN,SAAoBJ,SAApB,CAA8B;AAAA;AAAA;AAAA,SAEzCK,KAFyC,GAEnC;AACFC,MAAAA,GAAG,EAAC,IADF;AAEFC,MAAAA,MAAM,EAAC;AAFL,KAFmC;;AAAA,SAgBzCC,UAhByC,GAgB5B,MAAMC,QAAN,IAAgB;AACzBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACG,IAAT,CAAcN,GAA1B;AAEA,WAAKO,QAAL,CAAc;AACVP,QAAAA,GAAG,EAAEG,QAAQ,CAACG,IAAT,CAAcN;AADT,OAAd;AAID,UAAIQ,SAAS,GAAE,MAAM,KAAKC,KAAL,CAAWC,SAAX,CAAqB,KAAKX,KAAL,CAAWC,GAAhC,CAArB;;AAEA,UAAGQ,SAAS,IAAE,EAAX,IAAiBA,SAAS,IAAE,IAA/B,EAAoC;AACjCA,QAAAA,SAAS,GAACG,MAAM,CAAC,yCAAD,CAAhB;AACF;;AAED,WAAKJ,QAAL,CAAc;AACTN,QAAAA,MAAM,EAACO;AADE,OAAd;AAIA,YAAM,KAAKC,KAAL,CAAWG,OAAX,CAAmB,KAAKb,KAAL,CAAWE,MAA9B,EAAqC,KAAKF,KAAL,CAAWC,GAAhD,CAAN;AAIF,KArCwC;;AAAA,SAwCzCa,YAxCyC,GAwC5B,MAAI;AACb,YAAMC,YAAY,GAAC,IAAInB,QAAQ,CAACoB,IAAT,CAAcC,kBAAlB,EAAnB;AACAnB,MAAAA,WAAW,CACNkB,IADL,GAEKE,eAFL,CAEqBH,YAFrB,EAGKI,IAHL,CAGU,KAAKhB,UAHf;AAIH,KA9CwC;;AAAA,SAgDzCiB,MAhDyC,GAgDhC,YAAU;AACff,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACA,YAAMV,QAAQ,CAACoB,IAAT,GAAgBK,OAAhB,EAAN;AACA,WAAKb,QAAL,CAAc;AACVP,QAAAA,GAAG,EAAC;AADM,OAAd;AAGH,KAtDwC;AAAA;;AAOzCqB,EAAAA,iBAAiB,GAAE;AACf1B,IAAAA,QAAQ,CAACoB,IAAT,GAAgBO,kBAAhB,CAAmChB,IAAI,IAAE;AACrC,UAAGA,IAAH,EAAQ;AACJ,aAAKJ,UAAL,CAAgB;AAACI,UAAAA;AAAD,SAAhB;AACA,aAAKG,KAAL,CAAWc,UAAX,CAAsB,KAAKxB,KAAL,CAAWC,GAAjC;AACH;AACJ,KALD;AAMH;;AA0CDwB,EAAAA,MAAM,GAAG;AACL,QAAG,KAAKzB,KAAL,CAAWC,GAAX,KAAiB,IAApB,EAAyB;AACrB,0BACI;AAAA,+BACI;AAAG,UAAA,OAAO,EAAE,KAAKa,YAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cADJ;AAKH,KAND,MAOI;AACA,0BACI;AAAA,+BACI;AAAG,UAAA,OAAO,EAAE,KAAKM,MAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cADJ;AAKH;AACJ;;AAvEwC","sourcesContent":["import React, { Component } from 'react'\r\n\r\nimport firebase from 'firebase/app'\r\nimport 'firebase/auth'\r\nimport base,{ firebaseApp} from '../base'\r\n\r\n\r\nexport default class Login extends Component {\r\n    \r\n    state={\r\n        uid:null,\r\n        pseudo:null\r\n    }\r\n    \r\n    componentDidMount(){\r\n        firebase.auth().onAuthStateChanged(user=>{\r\n            if(user){\r\n                this.handleAuth({user})\r\n                this.props.handleUser(this.state.uid)\r\n            }\r\n        })\r\n    }\r\n    \r\n    handleAuth = async authData=>{\r\n        console.log(authData.user.uid)\r\n        \r\n        this.setState({\r\n            uid: authData.user.uid\r\n        })\r\n\r\n       let pseudoUid= await this.props.getPseudo(this.state.uid)\r\n        \r\n       if(pseudoUid=='' || pseudoUid==null){\r\n          pseudoUid=prompt(\"Veuillez rentrer votre pseudo attention\")\r\n       }\r\n\r\n       this.setState({\r\n            pseudo:pseudoUid\r\n       })\r\n\r\n       await this.props.getUser(this.state.pseudo,this.state.uid)\r\n\r\n        \r\n\r\n    }\r\n\r\n\r\n    authenticate=()=>{\r\n        const authProvider=new firebase.auth.GoogleAuthProvider()\r\n        firebaseApp\r\n            .auth()\r\n            .signInWithPopup(authProvider)\r\n            .then(this.handleAuth)\r\n    }\r\n\r\n    logout = async ()=>{\r\n        console.log('déconexion')\r\n        await firebase.auth().signOut()\r\n        this.setState({\r\n            uid:null\r\n        })\r\n    }\r\n\r\n    render() {\r\n        if(this.state.uid===null){\r\n            return (\r\n                <div>\r\n                    <p onClick={this.authenticate}>Connexion</p>\r\n                </div>\r\n            )\r\n        }\r\n        else{\r\n            return (\r\n                <div>\r\n                    <p onClick={this.logout}>Déconnexion</p>\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}